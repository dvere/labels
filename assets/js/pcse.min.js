function t(t,e,r){let F={tab:"ReadyForDespatch"};"TBA"!=e&&(e=e.split("/").reverse().join("-"),F.DateRangeStart=F.DateRangeEnd=e,F.SearchOn=5);let o={url:"/portal/Logistics/Orders",xhrFields:{withCredentials:!0},method:"GET",dataType:"html",data:F};$.ajax(o).done(function(t){return $(t).text()}).then(function(n){return $(n).find("tr:contains("+t+")").children().eq(9)}).then(function(t){r.unshift($(t).html().split("<br>").sort().reverse()[0]),n(r)})}function n(t){for(var n=t.pop(),e=(t=t.map(function(t,n){return"^FN"+n+"^FD"+t+"^FS"})).join("\n"),r="",F=n;F>0;F--)r+="^XA\n^XFR:DELIVERY.GRF^FS\n"+e+"\n^FN8^FDPieces: "+F+" of "+n+"^FS\n^XZ";$("body").css({visibility:"hidden"}),$("<div>",{id:"output"}).appendTo($("body")),$("#output").css({visibility:"visible",display:"block",position:"absolute",top:0,left:0,right:0,"z-index":9999}).html("<pre>${^XA^DFR:DELIVERY.GRF^PON^LS0^LH25,15\n    ^FO5,5^GB780,1200,4^FS\n    ^FO5,240^GB780,860,3^FS\n    ^FO5,420^GB480,180,3^FS\n    ^FO482,240^GB302,360,3^FS\n    ^FO5,660^GB780,1,3^FS\n    ^FO5,820^GB780,1,3^FS\n    ^FO5,970^GB780,1,3^FS\n    ^FO215,60^BY2^BCN,150,N^FN0^FS\n    ^FO5,25^A0N,30^FB780,1,0,C^FN0^FS\n    ^FO15,275^A0N,140^FB480,1,0,C^FN1^FS\n    ^FO15,455^A0N,140^FB480,1,0,C^FN2^FS\n    ^FO500,365^A0N,140^FB280,1,0,C^FN3^FS\n    ^FO5,615^A0N,40^FB780,1,0,C^FN4^FS\n    ^FO15,700^A0N,100^FB780,1,0,C^FN6^FS\n    ^FO150,840^A0N,24^FN4^FS\n    ^FO150,870^A0N,24^FN5^FS\n    ^FO150,900^A0N,24^FN6^FS\n    ^FO15,1000^A0N,100^FB780,1,0,C^FN8^FS\n    ^FO170,1120^BY2^BCN,55,Y^FN7^FS\n^XZ\n"+r+"}$</pre>"),$("#output pre").css({"border-style":"none","border-color":"transparent",color:"black","background-color":"white"}),window.print(),$("#output").remove(),$("body").removeAttr("style")}$.when($.ready).then(function(){if("Order"==window.location.pathname.split("/")[3]&&141560002==$("#OrderStatusId").val()){var n=prompt("Enter number of packages:",1);if(null==n||""==n||isNaN(n))console.log("Input quantity error or cancelled by user");else{var e=$("h3").eq(0).text().trim().split(" ")[2],r=$("nav.account-links").find("li").eq(1).text().trim(),F={BASINGSTOKE:"BS",BECKTON:"CV",BIRMINGHAM:"BP",BRISTOL:"BL",CAMBRIDGE:"CB",GATWICK:"CW",LEEDS:"LD",LETCHWORTH:"LE",MANCHESTER:"MA",MEDWAY:"ME",MILTON:"MK",NEWCASTLE:"NE",NORWICH:"NR",NOTTINGHAM:"NG",PLYMOUTH:"PL",READING:"NB",SLOUGH:"3S",SOUTHAMPTON:"SO",SWINDON:"SW",TELFORD:"TF",WARWICK:"MC"}[r.substr(0,r.indexOf(" ")).toUpperCase()],o={};$(".pcss-order-summary").find(".col-md-5").each(function(t,n){var e=$(".pcss-order-summary").find(".col-md-7").eq(t).text().trim();o[$(n).text()]=e});var i=o["Expected Delivery Date"],s=o["Shipping Address"].split(","),a=s.shift(),N=s.pop();t(e,i,[o["Delivery Route And Stop"].substr(0,4),o["Location Code"],F,a,s,N,e,n])}}});